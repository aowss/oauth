yarn run v1.22.10
$ node .
OAuth client listening on port 3000
user agent -> OAuth client [ client ]: initial call
OAuth client -> OAuth authorization server [ authorization endpoint ]: redirecting to http://localhost:8080/auth/realms/oauth-demo/protocol/openid-connect/auth?client_id=oauth-demo-web-client&redirect_uri=http://localhost:3000/oauth-callback&response_type=code&scope=accounts
user agent -> OAuth client [ redirection endpoint]: callback [ authorization code = 46a9d757-f72a-469f-8aaf-7e39115525be.0a79f01a-c9db-41a8-b181-8d8e74e2a0a1.a7f7c396-b568-4ece-9708-f13e4ea302ab ]
OAuth client -> OAuth authorization server [ token endpoint ]: exchanging authorization code for access token [ body = {"client_id":"oauth-demo-web-client","client_secret":"bf9efca5-07c2-401a-b22b-a70334cb577a","code":"46a9d757-f72a-469f-8aaf-7e39115525be.0a79f01a-c9db-41a8-b181-8d8e74e2a0a1.a7f7c396-b568-4ece-9708-f13e4ea302ab","grant_type":"authorization_code","redirect_uri":"http://localhost:3000/oauth-callback"} ]
OAuth client <- OAuth authorization server [ token endpoint ]: [ body = {"access_token":"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJSMThneGtZZUNNRDdRWnV0TnE3X2t2YU1RbFFvMUpSQU95eFpvUEhUZzhvIn0.eyJleHAiOjE2MzE1NDI2MjAsImlhdCI6MTYzMTU0MjMyMCwiYXV0aF90aW1lIjoxNjMxNTQyMzIwLCJqdGkiOiIyNTg4ODk1ZS1mNzFhLTQ3YjYtOWViYS00ZDI3YTNhYTI0NTkiLCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjgwODAvYXV0aC9yZWFsbXMvb2F1dGgtZGVtbyIsInN1YiI6ImFkYTNkZGM4LTk1NGUtNDcyMS1iMGZiLThjZjA2Y2Y0NDAzNSIsInR5cCI6IkJlYXJlciIsImF6cCI6Im9hdXRoLWRlbW8td2ViLWNsaWVudCIsInNlc3Npb25fc3RhdGUiOiIwYTc5ZjAxYS1jOWRiLTQxYTgtYjE4MS04ZDhlNzRlMmEwYTEiLCJhY3IiOiIxIiwic2NvcGUiOiJzdWJzY3JpcHRpb25zIGFjY291bnRzIiwic2lkIjoiMGE3OWYwMWEtYzlkYi00MWE4LWIxODEtOGQ4ZTc0ZTJhMGExIn0.olyMif6iyvbgeadvAL5q7Bd0EvZffm_1p3G5AlweERj-e5V92wyvh6d825bEMd7kFsYDUuNQJAo1Aufg_BSznd7MsKBiA9TOxIbYzsoZFBSc7jbYu9PNpdCagPzsnzFTrUpvXUPd1WHeBCD414BNF7lXrKm9AAf8fxoh247rgFFdwf7vl9g_DlE9VksNAw76WWdyNPcNk1dHpLoM_O2tRogTwowMwzS3mtkAGP_5P8NchlcUaUGVceFGLJ18Jfj9dMR-lQu91uxttw3UVVsgq0ll3QniCtXMsQkRLAFEQMaCmjiGgMPSe-4s0H8nY4IkBQFaScbG4OvgGFdt_mKD-g","expires_in":300,"refresh_expires_in":1800,"refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI2MTg3YjMzYy1kN2MzLTQ1MDAtOTY0OS0zZWEyYTE2YjdkOTIifQ.eyJleHAiOjE2MzE1NDQxMjAsImlhdCI6MTYzMTU0MjMyMCwianRpIjoiZTgzZGM5ZDctYTAwMS00ZTFmLTkzMTAtYzM5ZWNhY2M3YmVmIiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL2F1dGgvcmVhbG1zL29hdXRoLWRlbW8iLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjgwODAvYXV0aC9yZWFsbXMvb2F1dGgtZGVtbyIsInN1YiI6ImFkYTNkZGM4LTk1NGUtNDcyMS1iMGZiLThjZjA2Y2Y0NDAzNSIsInR5cCI6IlJlZnJlc2giLCJhenAiOiJvYXV0aC1kZW1vLXdlYi1jbGllbnQiLCJzZXNzaW9uX3N0YXRlIjoiMGE3OWYwMWEtYzlkYi00MWE4LWIxODEtOGQ4ZTc0ZTJhMGExIiwic2NvcGUiOiJzdWJzY3JpcHRpb25zIGFjY291bnRzIiwic2lkIjoiMGE3OWYwMWEtYzlkYi00MWE4LWIxODEtOGQ4ZTc0ZTJhMGExIn0.QbNbYKe0rOC9faCUR-6Qzdci1QP_y6OwWKuIAXVDFrs","token_type":"Bearer","not-before-policy":0,"session_state":"0a79f01a-c9db-41a8-b181-8d8e74e2a0a1","scope":"subscriptions accounts"} ]
OAuth client -> OAuth resource server: fetching the resource
OAuth client <- OAuth resource server: [ body = [{"accountId":"id-1","accountName":"name-1"},{"accountId":"id-2","accountName":"name-2"}] ]
